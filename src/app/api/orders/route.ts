import { NextRequest,NextResponse } from 'next/server';import { supabaseServer } from '@/lib/supabaseClient';
export async function GET(req:NextRequest){const sb=supabaseServer();const {searchParams}=new URL(req.url);let q=sb.from('orders').select('*').order('created_at',{ascending:false}).limit(100);const st=searchParams.get('status');const tb=searchParams.get('table');if(st) q=q.eq('status',st);if(tb) q=q.eq('table_id',Number(tb));const {data,error}=await q; if(error) return NextResponse.json({error:error.message},{status:400});return NextResponse.json({orders:data})}
